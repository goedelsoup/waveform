# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: Â© 2025 Cory Parent <goedelsoup+waveform@goedelsoup.io>

# Advanced Contract Example: Temporal Validation
# This contract demonstrates time-based validation rules for performance monitoring
# and SLA compliance checking.

publisher: "performance-monitor"
version: "3.0.0"
description: "Performance monitoring contract with temporal validation and SLA checks"

pipeline_selectors:
  selectors:
    - field: "type"
      operator: "equals"
      value: "trace"
    - field: "tags.monitoring"
      operator: "equals"
      value: "performance"
  priority: 15

inputs:
  traces:
    - span_name: "database_query"
      service_name: "user-service"
      attributes:
        db.system: "postgresql"
        db.operation: "SELECT"
        db.table: "users"
        query.complexity: "high"

  metrics:
    - name: "http_request_duration_seconds"
      type: "histogram"
      value: 0.250
      labels:
        endpoint: "/api/users"
        status: "200"

matchers:
  traces:
    - span_name: "database_query"
      service_name: "user-service"
      attributes:
        db.system: "postgresql"
        db.operation: "SELECT"
        db.table: "users"
        query.complexity: "high"

  metrics:
    - name: "http_request_duration_seconds"
      type: "histogram"
      labels:
        endpoint: "/api/users"
        status: "200"
